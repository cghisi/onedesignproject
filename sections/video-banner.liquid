<style>
  .index-section--video-embedded video{
    width:100%;
  }
</style>

<section class="hero-wrapper hero--video">
  {% if section.settings.video_link.media_type == 'video' %}
    <div class="hero-content hero-content-active">
      <div class="page-width">
        <div class="medium-up--one-half">
        <h1 class="hero-content__title h1 hero-title-active">{{ section.settings.heading }}</h1>
        {%- if section.settings.button_label != blank and section.settings.button_link != blank -%}
          {% assign background_color = section.settings.background %}
          {% assign btn_bg_color = section.settings.bg_button %}
          {% assign btn_text_color = section.settings.color_button %}
          {% assign text_color = section.settings.color_text %}
  
          <div class="hero-content__controls">
          <a href="{{ section.settings.button_link }}" class="hero-content-link  hero-link-active" style="background-color: {{ btn_bg_color }}; color: {{ btn_text_color }}">
            {{ section.settings.button_label | escape }}
          </a>
          </div>
        {%- endif -%}
        </div>
      </div>
    </div>
    <div class="hero--video-html">
      {{ section.settings.video_link | video_tag: autoplay: true, loop: true, muted: true, controls: false , preload : true}}
    </div>  
  {% endif %}
</section>

{% schema %}
{
  "name": "Video Banner",
  "class": "index-section index-section--video-banner",
  "settings": [
    {
      "type": "video",
      "id": "video_link",
      "label": {
        "en": "Video Link",
        "fr": "Lien de la video"
      }
    },
    {
      "type": "text",
      "id": "heading",
      "label": {
        "en": "Heading",
        "fr": "En tete"
      }
    },
    {
      "type": "color",
      "id": "color_text",
      "label": "Text Color"
    },
    {
        "type": "color",
        "id": "bg_button",
        "label": "Button Background Color"
    },
    {
        "type": "color",
        "id": "color_button",
        "label": "Button Text Color"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": {
        "en": "Button label",
        "fr": "Label du bouton"
      }
    },
    {
      "type": "url",
      "id": "button_link",
      "label": {
        "en": "Button link",
        "fr": "Lien"
      }
    }
  ],
  "presets": [
  {
    "name": {
      "en": "Video Banner",
      "fr": "Banniere Video"
    },
    "category": {
      "en": "Video",
      "fr": "Video"
    }
  }
]
}
{% endschema %}

{% stylesheet %}
.hero--video .hero-content{
  text-align:left;
  z-index:10;
}

.hero--video .hero-content__title{
  padding: 0px
}

.hero--video .hero--video-html{
  z-index:0
}

@media only screen and (max-device-width: 480px) {
  .hero--video .hero--video-html{
    min-height:50vh;
  }
  .hero--video .hero--video-html video{
    object-fit: cover;
    height: 100%;
    position: absolute;
  }
}
{% endstylesheet %}